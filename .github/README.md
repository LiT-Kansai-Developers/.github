# 共同開発のすすめ【Git編】
gitで共同開発する際のルールみたいなものを指定しておきます。
<br/>
今回は主に手順やルールについて書いていくので、gitについてもっと詳しく知りたい方は、我らががっしーの[Zennの記事](https://zenn.dev/penguin4731/books/11bee5738e367f/viewer/a265e5)を見てみてください。

# 手順
gitを開発するにあたっての、手順です。

1. issueをたてる
2. ブランチを切る
3. 変更箇所をコミットしてプッシュする
4. 変更を全体に反映するためにプルリクエストを送る
5. プルリクエストを許可し、全体へ反映する
6. 立てたissueをcloseする
7. ブランチを消去
8. リモートリポジトリの情報をローカルに反映する

## 1. issueをたてる
新しい機能を実装したり、バグを修正するにあたって、まずはissueというものを立てる必要があります。
<br/>
issueというのは、自分が今からどんなことをするのかを宣言するためのものです。
<br/>
<br/>
手順としてはまず、`New issue`をクリックします。

<img width="895" alt="issue_image" src="https://github.com/HackUOsaka/.github/assets/116473325/d56f984d-5b7c-411e-ba67-d2ee8c81100c">

そうすると下のような画面がでてくるので、タイトルと説明文を記述します。書き終わったら、`Submit new issues`をクリックしてください。
<br/>
※ タイトルは長苦なりすぎないようにする
<br/>
※ 説明文は別に書かなくても良い

<img width="1198" alt="issue_submit" src="https://github.com/HackUOsaka/.github/assets/116473325/c40bf58e-08c5-4730-b599-11c7418e2cbc">

上記が終わるとissueが作成されます。
<br/>
そこで、次のような画面になります。そこに書いてある番号（今回の場合、29）はブランチを作成する際に使用します。
<br/>
上記の番号を元にブランチを作成し、issueとブランチを紐付ける作業をしていきます。

<img width="587" alt="issue_number" src="https://github.com/HackUOsaka/.github/assets/116473325/948c6ddc-7ad5-4e84-b774-38b0684ece6b">

## 2. ブランチをきる
共同開発において、全体のコードを全員でいじっていくとカオスな状態になってしまいます。
<br/>
<br/>
なので、共同開発ではプロジェクト全体に影響を与えることのないよう、全体から枝分かれさせ、派生させたコードをいじっていくことで安全に作業する必要があります。
<br/>
<br/>
そして、その作業こそが**ブランチを切る**です。
<br/>
<br/>
では手順を説明していきます。

### ブランチを作成
下記のようなコマンドを打ち込むことで、ブランチを作成することができます。

    $ git branch ブランチ名

ブランチ名には、以下のようなルールを設けます。

#### ブランチ名は`カテゴリ名/#issue番号-詳細な名前`
カテゴリ名は以下の通りです。

- feature：新規機能追加や、スタイルの作成など
- fix：バグや修正など

基本カテゴリ名に困ったら、`feature`で大丈夫です。
<br/>
<br/>
issue番号は上記でissueを作成した際に表示された番号を入力してください。
<br/>
<br/>
詳細な名前に関しては、

- 長すぎない!!
- 英語で!!
- 単語と単語の間は`-（ハイフン）`でつなげる!!

のようなルールでお願いします。
<br/>
正直、上記のルールを守っていれば、名前はなんでもいいです。
<br/>
<br/>
上記を踏まえた上でブランチを作成すると、

    $ git branch feature/#29-create-post-screen

みたいな感じです。

### ブランチを切り替える
上記でブランチを作成した後は、作業するブランチを今作成したブランチに切り替える必要があります。
<br/>
切り替えるのは下記のコマンドを打つだけです。

    $ git switch ブランチ名

そうすると、上記で命名したブランチ名のブランチに移動できます。

### 番外編：ブランチを確認
今存在しているブランチを確認するには、下記のコマンドを打ち込んでください。

    $ git branch

そうすると、今存在しているブランチのリストが表示されます。

## 3. 開発
issueに書いた内容について、作業を進めていきましょう！

## 4. 変更箇所をコミットしてプッシュする
作業が終わったら、ファイル毎に変更をコミットしていきましょう。
<br/>
<br/>
この作業をするのはかなり面倒なので、`tig`というおすすめのツールがあります。
<br/>
使いたい場合には、[こちらの記事](https://zenn.dev/gakin/articles/use_tig_instread_of_git)を見てください。

### コミットしたいファイルをaddする
まずは、`tig`を起動しましょう。
<br />
ターミナルでプロジェクトの場所から下記のコマンドを実行することで、`tig`を起動できます。

    $ tig

起動すると、日付のようなものが含まれたコードがたくさん出てきますが、無視して`s`とうってください。
<br />
そうすると三つのエリアが出てきたと思います。

| エリア                     | 説明                   |
| ------------------------ | ---------------------- |
| Changes to be committed: | addしたファイル(コミット対象) |
| Changed but not updated: | 修正したファイル           |
| Untracked files:         | 追加したファイル           |

`Changes but not updated`や`Untracked files`のエリアにある、コミットしたいファイルまでカーソルを持っていき(カーソルを下へ動かすには`j`・上へは`k`)、`u`を打つとファイルがaddされます！
<br />
addしたファイルは`Changes to be commited`のエリアに移ります。(`Changes to be commited`にあるファイルの上で`u`をすると、addを取り消すことができます)

***※tig無しの場合 ↓***
<br />
<br />
まずはコミットしたいファイルを下記のコマンドで指定します。

    $ git add index.html

### コミットする
addしたファイルをコミットします。
`tig`を起動した状態で、`shift + c`を打つとコミットをする画面に移動します。
<br />
そこの一番上にcommitメッセージを記述していきます。`i`を打つと記述できるモードになります。

コミットメッセージにも以下のようなルールを設けます。

#### コミットメッセージは`カテゴリ名: メッセージ #issue番号`
カテゴリ名は下記の通りです。

- add: 新規機能追加など
- fix: バグ修正
- hotfix: クリティカルなバグ修正
- update: 機能修正(追加ではない)
- remove: 削除

メッセージは好きなように書いてください。(英語の方がよい)
<br/>
#issue番号は上記の番号を記入しますが、issueと直接関係のないコミットはissue番号を記入する必要はありません。

上記のようにcommitメッセージがかければ、`ctrl + c`でコマンドを打てるモードに移行し、`:wq`を打ってをエンターするとコミット完了です！

addする画面に戻るので、それ以上commitするものがない場合には`ctrl + c`で`tig`を終了してください。

***※tig無しの場合 ↓***
addしたファイルをコミットします。

    $ git commit -m "コミットメッセージ"

コミットメッセージは上記のフォーマットにしたがって記述してください。

### コミットをプッシュする
コミットしたものを現在いるブランチにプッシュします。

    $ git push origin HEAD

## 5. 変更を全体に反映するために`pull request`を送る
自分が作業した変更を全体のコードに反映するために、`pull request`というものを送る必要があります。
<br/>
これは、反映するための許可をもらう申請をするということです。

![pull-request](assets/pull-req.png)

上の画像のように、`Compare & pull request`を押すこと下の画像のような画面に移行します。

<img width="787" alt="pull-req" src="https://github.com/HackUOsaka/.github/assets/116473325/5b27bafa-f02e-488c-b74b-6ea81745dcec">

下の`Write`の箇所は書かなくても大丈夫です。
<br/>
※この欄に`close #issue番号`を記述しておくと、pull requestが受理された際に、issueが自動で削除されます。

## 6. pull requestを許可して、全体に反映
上記でプルリクエストを送ると、下の図のような画面が表示されます。

<img width="704" alt="pull-merge" src="https://github.com/HackUOsaka/.github/assets/116473325/c40a5d0d-96d3-4c17-9552-3b171cc5764c">

そして、上の画像の`Merge pull request`をクリックすると、変更が全体へ反映されます。

## 7. issueとbranchを削除
後は後片付けです。
<br/>
<br/>
たてたissueを消去し、作成したブランチを削除して終了です。
<br/>
※ issueは`pull request`を送る際に、`close #issue番号`を記述すると勝手に削除されます。慣れてきたら使ってみてください。
